[package]
name = "kernel"
version = "0.1.0"
authors = ["Alister Lee <alister@dev.shortepic.com>"]
edition = "2018"

[lib]
name = "libkernel"
# NOTE: exclude cargo test --lib from cargo test --tests; see make test
test = false

[[bin]]
name = "kernel"
test = false

[dependencies]
test-types = { path = "test-types" }
qemu-exit = "0.1.1"
spin = "0.5.2"
linked_list_allocator = "0.8.3"
register = "0.5.0"

[target.'cfg(target_arch = "aarch64")'.dependencies]
cortex-a = { path = "../cortex-a" }
dtb = "0.2.0"

[profile.dev]
opt-level = 1
panic = 'abort'

[dev-dependencies]
test-macros = { path = "test-macros" }
claim = "0.3.1"

[profile.release]
opt-level = 2
panic = 'abort'
